{"ast":null,"code":"import _regeneratorRuntime from\"/Users/inmac/Downloads/Discord-Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/inmac/Downloads/Discord-Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as api from\"../../api\";import{openAlertMessage}from\"./alertActions\";export var authActions={SET_USER_DETAILS:\"AUTH.SET_USER_DETAILS\"};export var getActions=function getActions(dispatch){return{login:function login(userDetails,history){return dispatch(_login(userDetails,history));},register:function register(userDetails,history){return dispatch(_register(userDetails,history));},setUserDetails:function setUserDetails(userDetails){return dispatch(_setUserDetails(userDetails));}};};var _setUserDetails=function _setUserDetails(userDetails){return{type:authActions.SET_USER_DETAILS,userDetails:userDetails};};var _login=function _login(userDetails,history){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response,_response$exception,_response$exception$r,_response$data,_userDetails;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.login(userDetails);case 2:response=_context.sent;console.log(response);if(response.error){dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception=response.exception)===null||_response$exception===void 0?void 0:(_response$exception$r=_response$exception.response)===null||_response$exception$r===void 0?void 0:_response$exception$r.data));}else{_response$data=response===null||response===void 0?void 0:response.data,_userDetails=_response$data.userDetails;localStorage.setItem(\"user\",JSON.stringify(_userDetails));dispatch(_setUserDetails(_userDetails));history.push(\"/dashboard\");}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};var _register=function _register(userDetails,history){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response,_response$exception2,_response$exception2$,_response$data2,_userDetails2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.register(userDetails);case 2:response=_context2.sent;console.log(response);if(response.error){dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception2=response.exception)===null||_response$exception2===void 0?void 0:(_response$exception2$=_response$exception2.response)===null||_response$exception2$===void 0?void 0:_response$exception2$.data));}else{_response$data2=response===null||response===void 0?void 0:response.data,_userDetails2=_response$data2.userDetails;localStorage.setItem(\"user\",JSON.stringify(_userDetails2));dispatch(_setUserDetails(_userDetails2));history.push(\"/dashboard\");}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","setUserDetails","type","response","console","log","error","exception","data","localStorage","setItem","JSON","stringify","push"],"sources":["/Users/inmac/Downloads/Discord-Client/src/store/actions/authActions.js"],"sourcesContent":["import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails, history) =>\r\n      dispatch(register(userDetails, history)),\r\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n"],"mappings":"sQAAA,MAAO,GAAKA,IAAG,KAAM,WAAW,CAChC,OAASC,gBAAgB,KAAQ,gBAAgB,CAEjD,MAAO,IAAMC,YAAW,CAAG,CACzBC,gBAAgB,CAAE,uBACpB,CAAC,CAED,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,QAAQ,CAAK,CACtC,MAAO,CACLC,KAAK,CAAE,eAACC,WAAW,CAAEC,OAAO,QAAKH,SAAQ,CAACC,MAAK,CAACC,WAAW,CAAEC,OAAO,CAAC,CAAC,GACtEC,QAAQ,CAAE,kBAACF,WAAW,CAAEC,OAAO,QAC7BH,SAAQ,CAACI,SAAQ,CAACF,WAAW,CAAEC,OAAO,CAAC,CAAC,GAC1CE,cAAc,CAAE,wBAACH,WAAW,QAAKF,SAAQ,CAACK,eAAc,CAACH,WAAW,CAAC,CAAC,EACxE,CAAC,CACH,CAAC,CAED,GAAMG,gBAAc,CAAG,QAAjBA,gBAAc,CAAIH,WAAW,CAAK,CACtC,MAAO,CACLI,IAAI,CAAET,WAAW,CAACC,gBAAgB,CAClCI,WAAW,CAAXA,WACF,CAAC,CACH,CAAC,CAED,GAAMD,OAAK,CAAG,QAARA,OAAK,CAAIC,WAAW,CAAEC,OAAO,CAAK,CACtC,iGAAO,iBAAOH,QAAQ,6NACGL,IAAG,CAACM,KAAK,CAACC,WAAW,CAAC,QAAvCK,QAAQ,eACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrB,GAAIA,QAAQ,CAACG,KAAK,CAAE,CAClBV,QAAQ,CAACJ,gBAAgB,CAACW,QAAQ,SAARA,QAAQ,sCAARA,QAAQ,CAAEI,SAAS,qEAAnB,oBAAqBJ,QAAQ,gDAA7B,sBAA+BK,IAAI,CAAC,CAAC,CACjE,CAAC,IAAM,gBACmBL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEK,IAAI,CAA9BV,YAAW,gBAAXA,WAAW,CACnBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACd,YAAW,CAAC,CAAC,CAEzDF,QAAQ,CAACK,eAAc,CAACH,YAAW,CAAC,CAAC,CACrCC,OAAO,CAACc,IAAI,CAAC,YAAY,CAAC,CAC5B,CAAC,sDACF,+DACH,CAAC,CAED,GAAMb,UAAQ,CAAG,QAAXA,UAAQ,CAAIF,WAAW,CAAEC,OAAO,CAAK,CACzC,kGAAO,kBAAOH,QAAQ,qOACGL,IAAG,CAACS,QAAQ,CAACF,WAAW,CAAC,QAA1CK,QAAQ,gBACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrB,GAAIA,QAAQ,CAACG,KAAK,CAAE,CAClBV,QAAQ,CAACJ,gBAAgB,CAACW,QAAQ,SAARA,QAAQ,uCAARA,QAAQ,CAAEI,SAAS,sEAAnB,qBAAqBJ,QAAQ,gDAA7B,sBAA+BK,IAAI,CAAC,CAAC,CACjE,CAAC,IAAM,iBACmBL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEK,IAAI,CAA9BV,aAAW,iBAAXA,WAAW,CACnBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACd,aAAW,CAAC,CAAC,CAEzDF,QAAQ,CAACK,eAAc,CAACH,aAAW,CAAC,CAAC,CACrCC,OAAO,CAACc,IAAI,CAAC,YAAY,CAAC,CAC5B,CAAC,wDACF,iEACH,CAAC"},"metadata":{},"sourceType":"module"}